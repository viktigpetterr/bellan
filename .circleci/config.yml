workflows:
  version: 2
  flow:
    jobs:
      - scan

jobs:
  scan:
    docker:
      # circleci ignores the entrypoint of debricked-scan, so start the scan manually with a step
      - image: debricked/debricked-scan

    working_directory: ~/repo

    # set debricked username and password as DEBRICKED_USERNAME and DEBRICKED_PASSWORD respectively,
    # inside project settings, to avoid storing them in config
    steps:
      - checkout
      - run: bash /circleci.sh
